[
  {
    "doctype": "Workflow",
    "name": "Expense Request Workflow",
    "workflow_name": "Expense Request Workflow",
    "document_type": "Expense Request",
    "is_active": 1,
    "module": "Imogi Finance",
    "override_status": 1,
    "workflow_state_field": "workflow_state",
    "docstatus": 0,
    "actions": [
      {
        "action": "Submit",
        "allowed": "All"
      },
      {
        "action": "Approve",
        "allowed": "Expense Approver"
      },
      {
        "action": "Reject",
        "allowed": "Expense Approver"
      },
      {
        "action": "Close",
        "allowed": "Expense Approver"
      },
      {
        "action": "Reopen",
        "allowed": "System Manager"
      }
    ],
    "states": [
      {
        "doctype": "Workflow Document State",
        "state": "Draft",
        "doc_status": "0",
        "allow_edit": "All",
        "backflow_allowed": false
      },
      {
        "doctype": "Workflow Document State",
        "state": "Reopened",
        "doc_status": "1",
        "allow_edit": "All",
        "backflow_allowed": true
      },
      {
        "doctype": "Workflow Document State",
        "state": "Pending Review",
        "doc_status": "1",
        "allow_edit": "All",
        "backflow_allowed": true,
        "acl": {
          "roles": [
            "Expense Approver",
            "System Manager"
          ],
          "users": []
        }
      },
      {
        "doctype": "Workflow Document State",
        "state": "Approved",
        "doc_status": "1",
        "allow_edit": "System Manager",
        "backflow_allowed": true,
        "acl": {
          "roles": [
            "System Manager"
          ],
          "users": []
        }
      },
      {
        "doctype": "Workflow Document State",
        "state": "Rejected",
        "doc_status": "1",
        "allow_edit": "System Manager",
        "backflow_allowed": true,
        "acl": {
          "roles": [
            "System Manager"
          ],
          "users": []
        }
      },
      {
        "doctype": "Workflow Document State",
        "state": "Linked",
        "doc_status": "1",
        "allow_edit": "System Manager",
        "backflow_allowed": false
      },
      {
        "doctype": "Workflow Document State",
        "state": "Closed",
        "doc_status": "1",
        "allow_edit": "System Manager",
        "backflow_allowed": false
      }
    ],
    "transitions": [
      {
        "doctype": "Workflow Transition",
        "action": "Submit",
        "state": "Draft",
        "next_state": "Pending Review",
        "allowed": "All",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Approve",
        "state": "Pending Review",
        "next_state": "Pending Review",
        "allowed": "Expense Approver",
        "condition": "doc.has_next_approval_level()"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Approve",
        "state": "Pending Review",
        "next_state": "Approved",
        "allowed": "Expense Approver",
        "condition": "not doc.has_next_approval_level()"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Reject",
        "state": "Pending Review",
        "next_state": "Rejected",
        "allowed": "Expense Approver"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Close",
        "state": "Linked",
        "next_state": "Closed",
        "allowed": "Expense Approver"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Backflow",
        "state": "Approved",
        "next_state": "Pending Review",
        "allowed": "System Manager"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Backflow",
        "state": "Rejected",
        "next_state": "Pending Review",
        "allowed": "System Manager"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Reopen",
        "state": "Rejected",
        "next_state": "Reopened",
        "allowed": "System Manager",
        "allow_self_approval": 0,
        "doc_status": "1"
      },
      {
        "doctype": "Workflow Transition",
        "action": "Reopen",
        "state": "Closed",
        "next_state": "Pending Review",
        "allowed": "System Manager",
        "doc_status": "1",
        "allow_self_approval": 0
      }
    ]
  },
  {
    "doctype": "Workflow",
    "name": "Administrative Payment Voucher Workflow",
    "workflow_name": "Administrative Payment Voucher Workflow",
    "document_type": "Administrative Payment Voucher",
    "is_active": 1,
    "module": "Imogi Finance",
    "override_status": 0,
    "workflow_state_field": "workflow_state",
    "docstatus": 0,
    "actions": [
      {
        "action": "Submit for Approval",
        "allowed": "All"
      },
      {
        "action": "Approve",
        "allowed": "Accounts Manager"
      },
      {
        "action": "Reject",
        "allowed": "Accounts Manager"
      },
      {
        "action": "Post",
        "allowed": "Accounts Manager"
      },
      {
        "action": "Cancel",
        "allowed": "Accounts Manager"
      }
    ],
    "states": [
      {
        "doctype": "Workflow Document State",
        "state": "Draft",
        "doc_status": "0",
        "allow_edit": "Owner"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Pending Approval",
        "doc_status": "0",
        "allow_edit": "Owner"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Approved",
        "doc_status": "0",
        "allow_edit": "System Manager"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Posted",
        "doc_status": "1",
        "allow_edit": "System Manager"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Rejected",
        "doc_status": "0",
        "allow_edit": "System Manager"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Cancelled",
        "doc_status": "2",
        "allow_edit": "System Manager"
      }
    ],
    "transitions": [
      {
        "doctype": "Workflow Transition",
        "action": "Submit for Approval",
        "state": "Draft",
        "next_state": "Pending Approval",
        "allowed": "All",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Approve",
        "state": "Pending Approval",
        "next_state": "Approved",
        "allowed": "Accounts Manager",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Reject",
        "state": "Pending Approval",
        "next_state": "Rejected",
        "allowed": "Accounts Manager",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Post",
        "state": "Approved",
        "next_state": "Posted",
        "allowed": "Accounts Manager",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Cancel",
        "state": "Posted",
        "next_state": "Cancelled",
        "allowed": "Accounts Manager",
        "allow_self_approval": 0
      }
    ]
  },
  {
    "doctype": "Workflow",
    "name": "Transfer Application Workflow",
    "workflow_name": "Transfer Application Workflow",
    "document_type": "Transfer Application",
    "is_active": 1,
    "module": "Imogi Finance",
    "override_status": 0,
    "workflow_state_field": "workflow_state",
    "docstatus": 0,
    "actions": [
      {
        "action": "Submit for Review",
        "allowed": "Accounts User"
      },
      {
        "action": "Approve Transfer",
        "allowed": "Accounts Manager"
      },
      {
        "action": "Release to Bank",
        "allowed": "Accounts User"
      },
      {
        "action": "Mark Paid",
        "allowed": "Accounts Manager"
      }
    ],
    "states": [
      {
        "doctype": "Workflow Document State",
        "state": "Draft",
        "doc_status": "0",
        "allow_edit": "Owner"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Finance Review",
        "doc_status": "0",
        "allow_edit": "Accounts User"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Approved for Transfer",
        "doc_status": "0",
        "allow_edit": "Accounts Manager"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Awaiting Bank Confirmation",
        "doc_status": "0",
        "allow_edit": "Accounts User"
      },
      {
        "doctype": "Workflow Document State",
        "state": "Paid",
        "doc_status": "1",
        "allow_edit": "System Manager"
      }
    ],
    "transitions": [
      {
        "doctype": "Workflow Transition",
        "action": "Submit for Review",
        "state": "Draft",
        "next_state": "Finance Review",
        "allowed": "Accounts User",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Approve Transfer",
        "state": "Finance Review",
        "next_state": "Approved for Transfer",
        "allowed": "Accounts Manager",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Release to Bank",
        "state": "Approved for Transfer",
        "next_state": "Awaiting Bank Confirmation",
        "allowed": "Accounts User",
        "allow_self_approval": 0
      },
      {
        "doctype": "Workflow Transition",
        "action": "Mark Paid",
        "state": "Awaiting Bank Confirmation",
        "next_state": "Paid",
        "allowed": "Accounts Manager",
        "allow_self_approval": 0,
        "condition": "doc.payment_entry and frappe.db.get_value('Payment Entry', doc.payment_entry, 'docstatus') == 1"
      }
    ]
  }
]
